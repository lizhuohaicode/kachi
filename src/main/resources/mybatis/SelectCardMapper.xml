<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.dao.SelectCardDao">

	<select id="list" resultType="com.team.model.SelectCard" parameterType="java.util.Map">
		select r.tsid,
			   r.released,
			   r.mcc,
			   concat(o.operatornamecn,' (',o.operatorCode,')') operatorName,
			   r.result_code,
			   r.assistant,
			   r.selectDate
		from m_select_card r
		left join m_operator o on r.operator=o.operatorCode
		where r.result_code != 0
		<if test="tsid!=null">
			  and r.tsid=#{tsid,jdbcType=INTEGER}
		</if>
		<if test="startDate!=null">
			  and (r.selectDate between #{startDate,jdbcType=TIMESTAMP} and #{endDate,jdbcType=TIMESTAMP})
		</if>
		order by r.selectDate desc
	</select>

</mapper>