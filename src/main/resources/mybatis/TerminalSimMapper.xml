<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.dao.TerminalSimDao">

	<select id="getTerminalSimByTsid" resultType="com.team.model.TerminalSim">
		select id, imsi, tsid, 
      		   mcc, groupkey, beattime, 
      		   date, reserve, ecardimsi, 
      		   ecardduration, runversion, vcountrycode
		from m_terminal_sim
		where tsid=#{tsid,jdbcType=INTEGER}
	</select> 
	
	<select id="getTerminalSimList" parameterType="java.util.Map" resultType="com.team.model.TerminalSim">
		select r.*
			  ,ifnull(t.namecn,t.countryname) countryName
		from m_terminal_sim r
		left join m_country t
		on t.countrycode=r.vcountrycode
		where 1=1
		<if test="imsi!=null">
			and r.imsi = #{imsi,jdbcType=BIGINT}
		</if>
		<if test="tsid!=null">
			and r.tsid = #{tsid,jdbcType=INTEGER}
		</if>
		order by r.tsid
	</select>
	
	<delete id="deleteTerminalByIds">
		delete from  m_terminal_sim
	    where ID in (<foreach collection="array" item="item" separator=",">#{item,jdbcType=INTEGER}</foreach>)
	</delete>
	
</mapper>